<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tennis Tracker</title>
  <link rel="icon" type="image/png" sizes="32x32" href="assets/tennis-report/favicon-32-thin.png">
  <link rel="icon" type="image/png" sizes="16x16" href="assets/tennis-report/favicon-16.png">
  <link rel="icon" type="image/png" sizes="48x48" href="assets/tennis-report/favicon-48.png">
  <link rel="icon" type="image/x-icon" href="assets/tennis-report/favicon-32thin.ico">
  <link rel="shortcut icon" href="assets/tennis-report/favicon-32thin.ico">
  <link rel="apple-touch-icon" href="assets/tennis-report/apple-touch-icon.png">
  <meta property="og:type" content="website">
  <meta property="og:title" content="Tennis Tracker">
  <meta property="og:description" content="Tournament calendars, match reports, and player analysis for junior tennis">
  <meta property="og:image" content="https://jazzyalex.github.io/TennisGroup/assets/tennis-report/og-image-centered-1200x630.png">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Space+Grotesk:wght@500;600;700&display=swap');

    :root {
      --bg-primary: #f8fafc;
      --bg-secondary: #ffffff;
      --bg-tertiary: #f1f5f9;
      --text-primary: #1e293b;
      --text-secondary: #64748b;
      --text-muted: #94a3b8;
      --border: #e2e8f0;
      --border-subtle: #f1f5f9;
      --court-green: #2d5a27;
      --court-green-light: #3d7a37;
      --accent-cyan: #0891b2;
      --accent-amber: #f59e0b;
      --accent-emerald: #10b981;
      --card-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
      --card-shadow-hover: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
      --hero-card-bg: rgba(255, 255, 255, 0.94);
      --hero-card-text: #0f172a;
      --hero-card-muted: #475569;
      --hero-card-border: rgba(255, 255, 255, 0.6);
      --hero-card-stat-bg: rgba(15, 23, 42, 0.08);
      --hero-badge-bg: rgba(16, 185, 129, 0.15);
      --hero-badge-text: #065f46;
      --player-green: #2d5a2d;
      --player-green-soft: #3d6f3d;
      --player-light: #e8f5e9;
      --player-border: #c8e6c9;
      --player-text: #1f2937;
      --player-text-muted: #6b7280;
      --player-text-light: #9ca3af;
      --player-trend-up: #10b981;
      --player-trend-down: #ef4444;
      --player-card-shadow: 0 18px 32px rgba(15, 23, 42, 0.12);
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --bg-primary: #0f172a;
        --bg-secondary: #1e293b;
        --bg-tertiary: #334155;
        --text-primary: #e2e8f0;
        --text-secondary: #94a3b8;
        --text-muted: #64748b;
        --border: rgba(255,255,255,0.08);
        --border-subtle: rgba(255,255,255,0.04);
        --card-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -2px rgba(0, 0, 0, 0.2);
        --card-shadow-hover: 0 20px 25px -5px rgba(0, 0, 0, 0.4), 0 8px 10px -6px rgba(0, 0, 0, 0.3);
        --hero-card-bg: rgba(15, 23, 42, 0.85);
        --hero-card-text: #e2e8f0;
        --hero-card-muted: #cbd5f5;
        --hero-card-border: rgba(148, 163, 184, 0.3);
        --hero-card-stat-bg: rgba(255, 255, 255, 0.08);
        --hero-badge-bg: rgba(16, 185, 129, 0.25);
        --hero-badge-text: #d1fae5;
      }
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      min-height: 100vh;
      line-height: 1.6;
    }

    /* Hero Section */
    .hero {
      background: linear-gradient(135deg, var(--court-green) 0%, var(--court-green-light) 100%);
      position: relative;
      overflow: hidden;
      padding: 48px 32px;
    }

    .hero::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background:
        linear-gradient(90deg, transparent 49.5%, rgba(255,255,255,0.15) 49.5%, rgba(255,255,255,0.15) 50.5%, transparent 50.5%),
        linear-gradient(0deg, transparent 0%, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0.15) 3%, transparent 3%);
      pointer-events: none;
    }

    .hero-content {
      max-width: 1180px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: minmax(0, 1.5fr) minmax(380px, 1fr);
      gap: 24px;
      align-items: center;
      text-align: left;
      position: relative;
      z-index: 1;
    }

    .hero-left {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .hero-header {
      display: flex;
      align-items: center;
      gap: 22px;
    }

    .logo {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .logo svg {
      width: 64px;
      height: 64px;
      border-radius: 12px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.3);
    }

    .hero h1 {
      font-family: 'Space Grotesk', sans-serif;
      font-size: clamp(2rem, 5vw, 3rem);
      font-weight: 700;
      color: white;
      margin: 0;
      letter-spacing: -0.02em;
    }

    .hero-subtitle {
      font-size: 1.125rem;
      color: rgba(255,255,255,0.85);
      max-width: 600px;
      margin: 0;
    }

    .player-card {
      background: #ffffff;
      color: var(--player-text);
      border-radius: 16px;
      padding: 16px 18px 18px;
      box-shadow: var(--player-card-shadow);
      min-width: 0;
      width: 100%;
      max-width: 380px;
      justify-self: end;
      align-self: center;
      border-top: 3px solid var(--player-green);
    }

    .player-card__header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      margin-bottom: 14px;
    }

    .player-card__name {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 1.15rem;
      font-weight: 700;
      letter-spacing: -0.02em;
      color: var(--player-text);
    }

    .player-card__updated {
      font-size: 0.7rem;
      color: var(--player-text-light);
      font-weight: 500;
      white-space: nowrap;
    }

    .player-card__divider {
      display: none;
    }

    .player-card__metrics {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 8px;
    }

    .player-card__metric,
    .player-card__panel {
      background: #f8f9fa;
      border: 1px solid #eaeaea;
      border-radius: 10px;
      padding: 10px 12px;
      transition: all 0.15s ease;
    }

    .player-card__metric:hover,
    .player-card__metric:focus-within,
    .player-card__panel:hover,
    .player-card__panel:focus-within {
      background-color: #f0f4f0;
      border-color: #d4e5d4;
    }

    .player-card__metric-title {
      display: flex;
      align-items: center;
      gap: 4px;
      font-size: 0.65rem;
      font-weight: 600;
      letter-spacing: 0.02em;
      color: var(--player-text-muted);
    }

    .player-card__metric-value {
      font-size: 1rem;
      font-weight: 700;
      color: var(--player-green);
      display: flex;
      align-items: center;
      gap: 5px;
      margin-top: 4px;
      font-variant-numeric: tabular-nums;
    }

    .player-card__metric-value a,
    .player-card__panel a,
    .player-card__utr-values,
    .player-card__ranking-list {
      color: inherit;
      text-decoration: none;
    }

    .player-card__utr-values {
      display: flex;
      flex-direction: column;
      gap: 4px;
      margin-top: 6px;
      text-decoration: none;
      color: inherit;
    }

    .player-card__utr-row {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .player-card__utr-label {
      font-size: 0.65rem;
      color: var(--player-text-muted);
      font-weight: 500;
      min-width: 10px;
    }

    .player-card__utr-value {
      font-size: 1.05rem;
      font-weight: 700;
      color: var(--player-green);
      font-variant-numeric: tabular-nums;
    }

    .player-card__utr-value-small {
      font-size: 0.85rem;
      font-weight: 600;
      color: var(--player-green);
      font-variant-numeric: tabular-nums;
    }

    .player-card__trend {
      font-size: 0.8rem;
      font-weight: 600;
      line-height: 1;
    }

    .player-card__trend--up {
      color: var(--player-trend-up);
    }

    .player-card__trend--down {
      color: var(--player-trend-down);
    }

    .player-card__ranking-list {
      margin-top: 4px;
      display: grid;
      gap: 3px;
      font-weight: 600;
      color: var(--player-green);
      font-variant-numeric: tabular-nums;
      font-size: 0.85rem;
    }

    .player-card__ranking-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      font-size: 0.85rem;
    }

    .player-card__ranking-row span:first-child {
      font-size: 0.65rem;
      color: var(--player-text-muted);
      font-weight: 500;
    }

    .player-card__bottom {
      margin-top: 10px;
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 8px;
    }

    .player-card__panel--points {
      background: #f8f9fa;
    }

    .player-card__panel-title {
      font-size: 0.7rem;
      font-weight: 600;
      letter-spacing: 0.01em;
      color: var(--player-green);
      margin-bottom: 8px;
    }

    .player-card__points-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 6px;
    }

    .player-card__points-grid > span {
      display: flex;
      flex-direction: column;
    }

    .player-card__points-grid > span:first-child {
      align-items: flex-start;
    }

    .player-card__points-grid > span:not(:first-child) {
      align-items: center;
    }

    .player-card__points-label {
      font-size: 0.6rem;
      color: var(--player-text-muted);
      font-weight: 500;
    }

    .player-card__points-value {
      font-size: 0.9rem;
      font-weight: 700;
      color: var(--player-green);
      margin-top: 3px;
      font-variant-numeric: tabular-nums;
    }

    .player-card__tr-grid {
      display: grid;
      gap: 4px;
    }

    .player-card__tr-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-weight: 600;
      color: var(--player-green);
      font-variant-numeric: tabular-nums;
      font-size: 0.85rem;
    }

    .player-card__tr-row span:first-child {
      font-size: 0.65rem;
      color: var(--player-text-muted);
      font-weight: 500;
    }

    /* Expiration Alert - Simple banner style */
    .player-card__alert {
      margin-top: 10px;
      padding: 10px 14px;
      background: linear-gradient(90deg, #fef3c7 0%, #fef9c3 100%);
      border-left: 4px solid #f59e0b;
      border-radius: 8px;
      color: #92400e;
      font-size: 0.75rem;
      font-weight: 600;
    }

    /* View Profile Link */
    .player-card__profile-link {
      margin-top: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      padding: 10px 12px;
      background: var(--player-green);
      border-radius: 10px;
      color: #ffffff;
      font-size: 0.8rem;
      font-weight: 600;
      text-decoration: none;
      transition: all 0.15s ease;
    }

    .player-card__profile-link:hover {
      background: var(--player-green-soft);
      transform: translateY(-1px);
    }

    .player-card__profile-link svg {
      width: 16px;
      height: 16px;
    }


    /* Main Content */
    .main {
      max-width: 1200px;
      margin: 0 auto;
      padding: 48px 24px;
    }

    /* Section Headers */
    .section-header {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 24px;
    }

    .section-bar {
      width: 6px;
      height: 28px;
      background: linear-gradient(180deg, var(--accent-cyan) 0%, var(--accent-emerald) 100%);
      border-radius: 3px;
    }

    .section-title {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--text-primary);
    }

    .section-badge {
      background: var(--bg-tertiary);
      border: 1px solid var(--border);
      padding: 4px 12px;
      border-radius: 100px;
      font-size: 0.75rem;
      font-weight: 600;
      color: var(--text-secondary);
    }

    .section-actions {
      margin-left: auto;
      display: inline-flex;
      align-items: center;
      gap: 10px;
    }

    .favorites-filter-toggle {
      width: 32px;
      height: 32px;
      border-radius: 10px;
      border: 1px solid var(--border);
      background: var(--bg-tertiary);
      color: var(--text-muted);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: opacity 0.2s, transform 0.2s, border-color 0.2s;
    }

    .favorites-filter-toggle:hover {
      opacity: 0.95;
      transform: translateY(-1px);
    }

    .favorites-filter-toggle:focus-visible {
      outline: 2px solid var(--accent-cyan);
      outline-offset: 3px;
    }

    .favorites-filter-toggle svg {
      width: 16px;
      height: 16px;
      fill: transparent;
      stroke: currentColor;
      stroke-width: 2;
    }

    .favorites-filter-toggle.is-active {
      color: var(--accent-amber);
      border-color: rgba(245, 158, 11, 0.55);
    }

    .favorites-filter-toggle.is-active svg {
      fill: currentColor;
    }

    /* Tournament Cards Grid */
    .cards-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
      gap: 24px;
      margin-bottom: 48px;
    }

    .calendar-row {
      margin-bottom: 24px;
    }

    .calendar-row .tournament-card {
      width: 100%;
    }

    .calendar-card {
      min-height: 110px;
      padding: 14px 20px;
    }

    .tournament-card.calendar-card {
      background: var(--court-green);
      border-color: rgba(255, 255, 255, 0.22);
    }

    .tournament-card.calendar-card::before {
      background: none;
    }

    .calendar-card .card-title,
    .calendar-card .card-description {
      color: rgba(255, 255, 255, 0.95);
    }

    .calendar-card .card-description {
      color: rgba(255, 255, 255, 0.82);
      margin-bottom: 12px;
    }

    .calendar-card .card-type.calendar {
      background: rgba(255, 255, 255, 0.16);
      color: rgba(255, 255, 255, 0.95);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .calendar-card .calendar-header-meta .meta-item {
      color: rgba(255, 255, 255, 0.8);
    }

    .calendar-card .calendar-header-meta .meta-icon {
      opacity: 0.9;
    }

    .calendar-card .card-arrow {
      background: rgba(255, 255, 255, 0.16);
      color: rgba(255, 255, 255, 0.95);
    }

    .tournament-card.calendar-card:hover {
      border-color: rgba(255, 255, 255, 0.3);
    }

    .calendar-card:hover .card-arrow {
      background: rgba(255, 255, 255, 0.24);
      transform: translateX(4px);
    }

    .tournament-card.is-upcoming {
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.08), rgba(255, 255, 255, 0.9));
      border-color: rgba(16, 185, 129, 0.35);
    }

    .tournament-card.is-past {
      background: linear-gradient(135deg, rgba(148, 163, 184, 0.18), rgba(255, 255, 255, 0.85));
      border-color: rgba(148, 163, 184, 0.45);
    }

    @media (prefers-color-scheme: dark) {
      .tournament-card.is-upcoming {
        background: rgba(16, 185, 129, 0.12);
        border-color: rgba(16, 185, 129, 0.3);
      }

      .tournament-card.is-past {
        background: rgba(148, 163, 184, 0.15);
        border-color: rgba(148, 163, 184, 0.35);
      }
    }

    .tournament-card {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 20px;
      padding: 28px;
      transition: all 0.3s ease;
      text-decoration: none;
      display: block;
      position: relative;
      overflow: hidden;
    }

    .tournament-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, var(--court-green) 0%, var(--court-green-light) 100%);
      transform: scaleX(0);
      transition: transform 0.3s ease;
    }

    .tournament-card:hover {
      box-shadow: var(--card-shadow-hover);
      transform: translateY(-4px);
      border-color: var(--court-green);
    }

    .tournament-card:hover::before {
      transform: scaleX(1);
    }

	    .card-header {
	      display: flex;
	      align-items: flex-start;
	      justify-content: space-between;
	      margin-bottom: 16px;
	    }

		    .card-actions {
		      display: flex;
		      align-items: center;
		      gap: 8px;
		      margin-left: auto;
		    }

        .card-favorite-toggle {
          width: 30px;
          height: 30px;
          border-radius: 999px;
          border: 1px solid var(--border);
          background: var(--bg-tertiary);
          color: var(--text-muted);
          display: inline-flex;
          align-items: center;
          justify-content: center;
          cursor: pointer;
          transition: opacity 0.2s, transform 0.2s, border-color 0.2s;
          user-select: none;
          flex-shrink: 0;
        }

        .card-favorite-toggle:hover {
          opacity: 0.95;
          transform: translateY(-1px);
        }

        .card-favorite-toggle:focus-visible {
          outline: 2px solid var(--accent-cyan);
          outline-offset: 3px;
        }

        .card-favorite-toggle svg {
          width: 16px;
          height: 16px;
          fill: transparent;
          stroke: currentColor;
          stroke-width: 2;
        }

        .tournament-card[data-favorited="true"] .card-favorite-toggle {
          color: var(--accent-amber);
          border-color: rgba(245, 158, 11, 0.55);
        }

        .tournament-card[data-favorited="true"] .card-favorite-toggle svg {
          fill: currentColor;
        }

        .tournament-card.is-hidden-by-favorite-filter {
          display: none;
        }

        .calendar-card .card-favorite-toggle {
          background: rgba(255, 255, 255, 0.16);
          border-color: rgba(255, 255, 255, 0.22);
          color: rgba(255, 255, 255, 0.9);
        }

        .calendar-card[data-favorited="true"] .card-favorite-toggle {
          color: #fbbf24;
          border-color: rgba(251, 191, 36, 0.6);
        }

		    .card-usta-link {
		      display: inline-flex;
		      align-items: center;
		      justify-content: center;
		      padding: 6px 10px;
	      border-radius: 999px;
	      border: 1px solid var(--border);
	      background: var(--bg-tertiary);
	      color: var(--text-secondary);
	      font-size: 0.7rem;
	      font-weight: 700;
	      text-transform: uppercase;
	      letter-spacing: 0.05em;
	      cursor: pointer;
	      transition: opacity 0.2s, transform 0.2s, border-color 0.2s;
	      user-select: none;
	    }

	    .card-usta-link:hover {
	      opacity: 0.9;
	      transform: translateY(-1px);
	    }

	    .card-usta-link:focus-visible {
	      outline: 2px solid var(--accent-cyan);
	      outline-offset: 3px;
	    }

    .calendar-header {
      align-items: center;
    }

    .calendar-header-left {
      display: flex;
      align-items: center;
      gap: 14px;
      flex-wrap: wrap;
    }

    .calendar-header-meta {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }

    .calendar-header-meta .meta-item {
      font-size: 0.72rem;
      color: var(--text-muted);
    }

    .calendar-header-meta .meta-icon {
      width: 14px;
      height: 14px;
      opacity: 0.65;
    }

    .card-type {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      border-radius: 8px;
      font-size: 0.7rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .card-type.calendar {
      background: rgba(8, 145, 178, 0.12);
      color: var(--accent-cyan);
    }

    .card-type.report {
      background: rgba(245, 158, 11, 0.12);
      color: var(--accent-amber);
    }

    .card-type.report.is-closing-soon {
      background: rgba(239, 68, 68, 0.16);
      color: #ef4444;
    }

    .card-type.report.is-closed {
      background: rgba(148, 163, 184, 0.16);
      color: var(--text-muted);
    }

    .card-type-icon {
      width: 14px;
      height: 14px;
    }

    .card-arrow {
      width: 32px;
      height: 32px;
      border-radius: 8px;
      background: var(--bg-tertiary);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-muted);
      transition: all 0.2s ease;
    }

    .tournament-card:hover .card-arrow {
      background: var(--court-green);
      color: white;
      transform: translateX(4px);
    }

    .card-title {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 8px;
      line-height: 1.3;
    }

    .card-description {
      font-size: 0.85rem;
      color: var(--text-secondary);
      margin-bottom: 20px;
      line-height: 1.5;
    }

    .card-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
      padding-top: 16px;
      border-top: 1px solid var(--border-subtle);
    }

	    .meta-item {
	      display: flex;
	      align-items: center;
	      gap: 6px;
	      font-size: 0.8rem;
	      color: var(--text-muted);
	    }

	    .meta-item.meta-updated {
	      opacity: 0.95;
	    }

	    .meta-icon {
	      width: 16px;
	      height: 16px;
	      opacity: 0.7;
	    }

    /* Coming Soon Section */
    .coming-soon {
      background: var(--bg-tertiary);
      border: 1px dashed var(--border);
      border-radius: 20px;
      padding: 40px;
      text-align: center;
    }

    .coming-soon-icon {
      width: 48px;
      height: 48px;
      margin: 0 auto 16px;
      color: var(--text-muted);
      opacity: 0.5;
    }

    .coming-soon h3 {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 1.125rem;
      color: var(--text-secondary);
      margin-bottom: 8px;
    }

    .coming-soon p {
      font-size: 0.875rem;
      color: var(--text-muted);
    }

    /* Footer */
    .footer {
      background: var(--bg-secondary);
      border-top: 1px solid var(--border);
      padding: 32px 24px;
      text-align: center;
    }

    .footer-content {
      max-width: 600px;
      margin: 0 auto;
    }

    .footer p {
      font-size: 0.875rem;
      color: var(--text-muted);
      margin-bottom: 8px;
    }

    .footer a {
      color: var(--accent-cyan);
      text-decoration: none;
      border-bottom: 1px dotted var(--accent-cyan);
      transition: opacity 0.2s;
    }

    .footer a:hover {
      opacity: 0.8;
    }

    /* Responsive */
    @media (max-width: 1200px) {
      .hero-content {
        grid-template-columns: 1fr;
      }

      .player-card {
        min-width: 0;
        max-width: 720px;
      }
    }

    @media (max-width: 900px) {
      .player-card__metrics {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }

      /* Keep Rankings in normal grid flow for tablet */
      .player-card__bottom {
        grid-template-columns: 1.5fr 1fr;
      }
    }

    @media (max-width: 640px) {
      /* Remove single column layout - keep 2 columns from 768px breakpoint */

      .player-card__header {
        flex-direction: column;
        align-items: flex-start;
        gap: 6px;
      }

      .player-card__updated {
        font-size: 0.75rem;
      }

      .player-card__name {
        font-size: 1.1rem;
      }
    }

    @media (max-width: 768px) {
      .hero {
        padding: 24px 16px;
      }

      /* Hide decorative court pattern on mobile */
      .hero::before {
        display: none;
      }

      /* Hide subtitle on mobile */
      .hero-subtitle {
        display: none;
      }

      .hero-content {
        grid-template-columns: 1fr;
        gap: 16px;
        text-align: left;
      }

      .logo svg {
        width: 48px;
        height: 48px;
      }

      /* ========================================
         MOBILE PLAYER CARD - Premium Design
         ======================================== */
      .player-card {
        width: 100%;
        max-width: 100%;
        padding: 0;
        border-radius: 14px;
        border-top: none;
        overflow: hidden;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
      }

      /* Header with green accent background */
      .player-card__header {
        background: linear-gradient(135deg, var(--player-green) 0%, var(--player-green-soft) 100%);
        padding: 12px 14px;
        margin-bottom: 0;
        flex-direction: row;
        align-items: center;
      }

      .player-card__name {
        font-size: 1rem;
        color: #ffffff;
      }

      .player-card__updated {
        font-size: 0.65rem;
        color: rgba(255, 255, 255, 0.75);
        margin-top: 0;
      }

      /* Metrics container */
      .player-card__metrics {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 1px;
        background: #e8e8e8;
        margin-bottom: 1px;
      }

      /* Remove the full-width span for Rankings */
      .player-card__metric:nth-child(3) {
        grid-column: auto;
      }

      /* Individual metric boxes - equal height */
      .player-card__metric {
        background: #ffffff;
        border: none;
        border-radius: 0;
        padding: 10px 8px;
        display: flex;
        flex-direction: column;
        min-height: 68px;
      }

      .player-card__metric-title {
        font-size: 0.6rem;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        color: var(--player-green);
        margin-bottom: auto;
      }

      /* UTR styling */
      .player-card__utr-values {
        gap: 1px;
        margin-top: 6px;
      }

      .player-card__utr-row {
        gap: 4px;
      }

      .player-card__utr-label {
        font-size: 0.55rem;
        min-width: 10px;
        color: #888;
      }

      .player-card__utr-value {
        font-size: 1rem;
        font-weight: 700;
      }

      .player-card__utr-value-small {
        font-size: 0.85rem;
        font-weight: 600;
      }

      .player-card__trend {
        font-size: 0.75rem;
      }

      /* WTN styling */
      .player-card__metric-value {
        font-size: 1.1rem;
        font-weight: 700;
        margin-top: 6px;
      }

      /* Rankings styling */
      .player-card__ranking-list {
        margin-top: 6px;
        gap: 1px;
      }

      .player-card__ranking-row {
        font-size: 0.9rem;
        font-weight: 700;
        gap: 6px;
      }

      .player-card__ranking-row span:first-child {
        font-size: 0.55rem;
        color: #888;
        min-width: 32px;
      }

      /* Bottom section */
      .player-card__bottom {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1px;
        background: #e8e8e8;
        margin-top: 0;
      }

      .player-card__panel {
        background: #ffffff;
        border: none;
        border-radius: 0;
        padding: 10px 8px;
        min-height: 64px;
      }

      .player-card__panel-title {
        font-size: 0.6rem;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        color: var(--player-green);
        margin-bottom: 6px;
      }

      /* USTA Points grid */
      .player-card__points-grid {
        display: flex;
        justify-content: space-between;
        gap: 2px;
      }

      .player-card__points-grid > span {
        flex: 1;
        text-align: center;
      }

      .player-card__points-grid > span:first-child {
        text-align: left;
      }

      .player-card__points-label {
        font-size: 0.5rem;
        text-transform: uppercase;
        letter-spacing: 0.03em;
        color: #888;
      }

      .player-card__points-value {
        font-size: 0.95rem;
        font-weight: 700;
        margin-top: 2px;
      }

      /* TR grid */
      .player-card__tr-grid {
        gap: 1px;
      }

      .player-card__tr-row {
        font-size: 0.9rem;
        font-weight: 700;
      }

      .player-card__tr-row span:first-child {
        font-size: 0.55rem;
        color: #888;
      }

      .main {
        padding: 32px 16px;
      }

      .cards-grid {
        grid-template-columns: 1fr;
      }

      .tournament-card {
        padding: 20px;
      }
    }
  </style>
</head>
<body>
  <!-- Hero Section -->
  <section class="hero">
    <div class="hero-content">
      <div class="hero-left">
        <div class="hero-header">
          <div class="logo">
            <svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect width="64" height="64" fill="#2d5a27"/>
              <rect x="0" y="8" width="64" height="8" fill="#fafafa"/>
              <rect x="28" y="8" width="8" height="56" fill="#fafafa"/>
            </svg>
          </div>
          <h1>Tennis Tracker</h1>
        </div>
        <p class="hero-subtitle">Tournament calendars, match reports, and player analysis for junior tennis in NorCal and beyond</p>
      </div>
      <aside class="player-card" aria-labelledby="player-card-name">
        <header class="player-card__header">
          <h2 class="player-card__name" id="player-card-name" data-player-name>Alexis Malakhova</h2>
          <span class="player-card__updated" data-player-updated>Updated Feb 6, 2026</span>
        </header>
        <div class="player-card__divider"></div>
        <section class="player-card__metrics" aria-label="Player metrics">
          <div class="player-card__metric">
            <div class="player-card__metric-title">UTR</div>
            <a class="player-card__utr-values" href="https://app.utrsports.net/profiles/3610257" target="_blank" rel="noopener">
              <span class="player-card__utr-row">
                <span class="player-card__utr-label">S</span>
                <span class="player-card__utr-value" data-player-stat="utr">4.07</span>
                <span class="player-card__trend player-card__trend--up">↑</span>
              </span>
              <span class="player-card__utr-row">
                <span class="player-card__utr-label">D</span>
                <span class="player-card__utr-value-small" data-player-stat="utr_doubles">4.02</span>
              </span>
            </a>
          </div>
          <div class="player-card__metric">
            <div class="player-card__metric-title">WTN</div>
            <div class="player-card__metric-value">
              <a href="https://www.usta.com/en/home/play/player-search/profile.html#?uaid=2018710796" target="_blank" rel="noopener" data-player-stat="wtn">33.81</a>
              <span class="player-card__trend" aria-label="No change">→</span>
            </div>
          </div>
          <div class="player-card__metric">
            <div class="player-card__metric-title">Rankings</div>
            <a class="player-card__ranking-list" href="https://www.usta.com/en/home/play/player-search/profile.html#?uaid=2018710796&tab=rankings" target="_blank" rel="noopener">
              <div class="player-card__ranking-row">
                <span>Nat</span>
                <span data-player-stat="usta_national">589</span>
              </div>
              <div class="player-card__ranking-row">
                <span>NorCal</span>
                <span data-player-stat="usta_section">34</span>
              </div>
            </a>
          </div>
        </section>
        <section class="player-card__bottom" aria-label="Ranking summaries">
          <div class="player-card__panel player-card__panel--points">
            <div class="player-card__panel-title">USTA Points</div>
            <a class="player-card__points-grid" href="https://www.usta.com/en/home/play/player-search/profile.html#?uaid=2018710796&tab=rankings" target="_blank" rel="noopener">
              <span>
                <span class="player-card__points-label">Total</span>
                <span class="player-card__points-value" data-player-stat="usta_points_total">713</span>
              </span>
              <span>
                <span class="player-card__points-label">Singles</span>
                <span class="player-card__points-value" data-player-stat="usta_points_singles">708</span>
              </span>
              <span>
                <span class="player-card__points-label">Doubles</span>
                <span class="player-card__points-value" data-player-stat="usta_points_doubles">5</span>
              </span>
            </a>
          </div>
          <div class="player-card__panel">
            <div class="player-card__panel-title">TR</div>
            <a class="player-card__tr-grid" href="https://www.tennisrecruiting.net/player/overview.asp?id=1088299" target="_blank" rel="noopener">
              <div class="player-card__tr-row">
                <span>Nat</span>
                <span data-player-stat="tr_national">6</span>
              </div>
              <div class="player-card__tr-row">
                <span>CA</span>
                <span data-player-stat="tr_california">3</span>
              </div>
            </a>
          </div>
        </section>
        <!-- Expiration Alert (shown only if points expiring soon) -->
        <div class="player-card__alert" data-expiration-alert style="display: none;">
          <span data-expiration-text>75 points expiring soon (23 days)</span>
        </div>
        <!-- View Full Profile Link -->
        <a href="player.html" class="player-card__profile-link">
          View Full Profile
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M5 12h14M12 5l7 7-7 7"/>
          </svg>
        </a>
      </aside>
    </div>
  </section>

  <!-- Main Content -->
  <main class="main">
    <!-- Active Reports Section -->
	    <section data-tournament-section="reports">
	      <div class="section-header">
	        <div class="section-bar"></div>
	        <h2 class="section-title">Tournament Reports</h2>
	        <div class="section-actions">
	          <span class="section-badge" data-tournament-count>5 Tournaments</span>
	          <button class="favorites-filter-toggle" type="button" aria-label="Show starred tournaments only" title="Show starred tournaments only" aria-pressed="false" data-favorites-filter-toggle>
	            <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
	              <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
	            </svg>
	          </button>
	        </div>
	      </div>

      <div class="calendar-row">
        <!-- USTA NorCal & National Calendar -->
        <a href="2025-usta-norcal-national.html" class="tournament-card calendar-card">
          <div class="card-header calendar-header">
            <div class="calendar-header-left">
              <span class="card-type calendar">
                <svg class="card-type-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                  <line x1="16" y1="2" x2="16" y2="6"/>
                  <line x1="8" y1="2" x2="8" y2="6"/>
                  <line x1="3" y1="10" x2="21" y2="10"/>
                </svg>
                Calendar
              </span>
              <div class="calendar-header-meta">
                <span class="meta-item">
                  <svg class="meta-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/>
                    <path d="M12 6v6l4 2"/>
                  </svg>
                  Full Year
                </span>
                <span class="meta-item">
                  <svg class="meta-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                    <circle cx="12" cy="10" r="3"/>
                  </svg>
                  NorCal + National
                </span>
                <span class="meta-item">
                  <svg class="meta-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
                  </svg>
                  Favorites
                </span>
              </div>
            </div>
	            <div class="card-arrow">
	              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
	                <path d="M5 12h14M12 5l7 7-7 7"/>
	              </svg>
	            </div>
	          </div>
	          <h3 class="card-title">USTA Girls U12/U14 Tournaments 2026</h3>
	          <p class="card-description">NorCal + National calendar (U12/U14 + Level filters) with distances from Los Altos, CA.</p>
	        </a>

	        <!-- PlayTennis tournament search (San Jose, CA) -->
	        <a
	          href="https://playtennis.usta.com/tournaments?location=San%20Jose%2C%20CA"
	          class="tournament-card is-upcoming"
	          target="_blank"
	          rel="noopener noreferrer"
	          data-tournament-id="playtennis-search|san-jose-ca"
	        >
	          <div class="card-header">
	            <span class="card-type calendar">
	              <svg class="card-type-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
	                <circle cx="11" cy="11" r="8"/>
	                <line x1="21" y1="21" x2="16.65" y2="16.65"/>
	                <line x1="11" y1="8" x2="11" y2="14"/>
	                <line x1="8" y1="11" x2="14" y2="11"/>
	              </svg>
	              Search
	            </span>
	            <div class="card-actions">
	              <div class="card-arrow">
	                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
	                  <path d="M5 12h14M12 5l7 7-7 7"/>
	                </svg>
	              </div>
	            </div>
	          </div>
	          <h3 class="card-title">PlayTennis tournaments: San Jose, CA</h3>
	          <p class="card-description">USTA tournament search results for San Jose, CA.</p>
	          <div class="card-meta">
	            <span class="meta-item">
	              <svg class="meta-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
	                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
	                <circle cx="12" cy="10" r="3"/>
	              </svg>
	              San Jose, CA
	            </span>
	          </div>
	        </a>

	        <!-- PlayTennis tournament search (Stockton, CA) -->
	        <a
	          href="https://playtennis.usta.com/tournaments?location=Stockton%2C%20CA"
	          class="tournament-card is-upcoming"
	          target="_blank"
	          rel="noopener noreferrer"
	          data-tournament-id="playtennis-search|stockton-ca"
	        >
	          <div class="card-header">
	            <span class="card-type calendar">
	              <svg class="card-type-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
	                <circle cx="11" cy="11" r="8"/>
	                <line x1="21" y1="21" x2="16.65" y2="16.65"/>
	                <line x1="11" y1="8" x2="11" y2="14"/>
	                <line x1="8" y1="11" x2="14" y2="11"/>
	              </svg>
	              Search
	            </span>
	            <div class="card-actions">
	              <div class="card-arrow">
	                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
	                  <path d="M5 12h14M12 5l7 7-7 7"/>
	                </svg>
	              </div>
	            </div>
	          </div>
	          <h3 class="card-title">PlayTennis tournaments: Stockton, CA</h3>
	          <p class="card-description">USTA tournament search results for Stockton, CA.</p>
	          <div class="card-meta">
	            <span class="meta-item">
	              <svg class="meta-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
	                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
	                <circle cx="12" cy="10" r="3"/>
	              </svg>
	              Stockton, CA
	            </span>
	          </div>
	        </a>
	      </div>

      <div class="cards-grid">
        <!-- Level 3 Mixed Doubles Sectionals (HRT) -->
        <a href="hrt-level3-mixed-doubles-sectionals-feb21-22-2026.html" class="tournament-card is-upcoming" data-card-updated-iso="2026-02-08T12:21:02-08:00" data-card-close-text="February 11, 2026 at 2:59 PM PST">
          <div class="card-header">
            <span class="card-type report" data-registration-pill>
              <svg class="card-type-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true" focusable="false">
                <circle cx="12" cy="12" r="10"/>
                <path d="M12 6v6l4 2"/>
              </svg>
              <span data-registration-pill-text>Closes Feb 11</span>
	            </span>
	            <div class="card-actions">
	              <span class="card-favorite-toggle" role="button" tabindex="0" aria-label="Star tournament" aria-pressed="false" data-favorite-toggle>
	                <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
	                  <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
	                </svg>
	              </span>
	              <span class="card-usta-link" role="button" tabindex="0" data-usta-url="https://playtennis.usta.com/competitions/hrtacademiadetenis/Tournaments/overview/B725D590-9D1A-4061-BAD6-DD7BD89100E0">USTA</span>
	              <div class="card-arrow">
	                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
	                  <path d="M5 12h14M12 5l7 7-7 7"/>
                </svg>
              </div>
            </div>
          </div>
          <h3 class="card-title">Level 3 Closed: HRT Mixed Doubles Sectionals</h3>
          <p class="card-description">Roster snapshot from the USTA players list for the Feb 21-22, 2026 mixed doubles sectionals in Larkspur.</p>
          <div class="card-meta">
            <span class="meta-item">
              <svg class="meta-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                <line x1="16" y1="2" x2="16" y2="6"/>
                <line x1="8" y1="2" x2="8" y2="6"/>
                <line x1="3" y1="10" x2="21" y2="10"/>
              </svg>
              Feb 21-22, 2026
            </span>
            <span class="meta-item">
              <svg class="meta-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                <circle cx="12" cy="10" r="3"/>
              </svg>
              Larkspur, CA
            </span>
            <span class="meta-item">
              <svg class="meta-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
              </svg>
              Level 3
            </span>
          
            <span class="meta-item meta-updated" data-card-updated="1">
              <svg class="meta-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true" focusable="false">
                <circle cx="12" cy="12" r="10"/>
                <path d="M12 6v6l4 2"/>
              </svg>
              <span data-card-updated-text>Updated Feb 8, 2026 12:21 PM PST</span>
            </span>
</div>
        </a>
        <!-- Open Level 5 Championship Singles -->
	        <a href="open-level5-championship-singles-san-jose-jan31-2026.html" class="tournament-card is-upcoming" data-card-updated-iso="2026-02-06T13:15:47-08:00" data-card-close-text="January 21, 2026 at 2:59 PM PST">
	          <div class="card-header">
	            <span class="card-type report" data-registration-pill>
	              <svg class="card-type-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true" focusable="false">
	                <circle cx="12" cy="12" r="10"/>
	                <path d="M12 6v6l4 2"/>
	              </svg>
	              <span data-registration-pill-text>Closes Jan 21</span>
	            </span>
		            <div class="card-actions">
		              <span class="card-favorite-toggle" role="button" tabindex="0" aria-label="Star tournament" aria-pressed="false" data-favorite-toggle>
		                <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
		                  <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
		                </svg>
		              </span>
		              <span class="card-usta-link" role="button" tabindex="0" data-usta-url="https://playtennis.usta.com/Competitions/fourdirectionstennis/Tournaments/Overview/AADD3F01-D779-44EB-8F33-3CD79A3018F1">USTA</span>
		              <div class="card-arrow">
		                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
		                  <path d="M5 12h14M12 5l7 7-7 7"/>
	                </svg>
	              </div>
	            </div>
	          </div>
          <h3 class="card-title">Open Level 5 Championship Singles - G12</h3>
          <p class="card-description">Daily roster tracking with USTA WTN, national/section rankings, and UTR ratings for the Jan 31 - Feb 1, 2026 Level 5 event in San Jose.</p>
          <div class="card-meta">
            <span class="meta-item">
              <svg class="meta-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                <line x1="16" y1="2" x2="16" y2="6"/>
                <line x1="8" y1="2" x2="8" y2="6"/>
                <line x1="3" y1="10" x2="21" y2="10"/>
              </svg>
              Jan 31 - Feb 1, 2026
            </span>
            <span class="meta-item">
              <svg class="meta-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                <circle cx="12" cy="10" r="3"/>
              </svg>
              San Jose, CA
            </span>
            <span class="meta-item">
              <svg class="meta-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
              </svg>
              Level 5
            </span>
          
            <span class="meta-item meta-updated" data-card-updated="1">
              <svg class="meta-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true" focusable="false">
                <circle cx="12" cy="12" r="10"/>
                <path d="M12 6v6l4 2"/>
              </svg>
              <span data-card-updated-text>Updated Feb 6, 2026 1:15 PM PST</span>
            </span>
</div>
        </a>

	        <!-- Open Level 5 Championship Singles (Larkspur) -->
	        <a href="open-level5-championship-singles-larkspur-jan31-2026.html" class="tournament-card is-upcoming" data-card-updated-iso="2026-02-06T13:12:29-08:00" data-card-close-text="January 21, 2026 at 2:59 PM PST">
	          <div class="card-header">
	            <span class="card-type report" data-registration-pill>
	              <svg class="card-type-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true" focusable="false">
	                <circle cx="12" cy="12" r="10"/>
	                <path d="M12 6v6l4 2"/>
	              </svg>
	              <span data-registration-pill-text>Closes Jan 21</span>
	            </span>
		            <div class="card-actions">
		              <span class="card-favorite-toggle" role="button" tabindex="0" aria-label="Star tournament" aria-pressed="false" data-favorite-toggle>
		                <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
		                  <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
		                </svg>
		              </span>
		              <span class="card-usta-link" role="button" tabindex="0" data-usta-url="https://playtennis.usta.com/Competitions/hrtacademiadetenis/Tournaments/Overview/8EA9DB88-B9C3-4C1A-8723-1F34CB0F6AC9">USTA</span>
		              <div class="card-arrow">
		                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
		                  <path d="M5 12h14M12 5l7 7-7 7"/>
	                </svg>
	              </div>
	            </div>
	          </div>
          <h3 class="card-title">Open Level 5 Championship Singles - G12</h3>
          <p class="card-description">Daily roster tracking with USTA WTN, national/section rankings, and UTR ratings for the Jan 31 - Feb 1, 2026 Level 5 event in Larkspur.</p>
          <div class="card-meta">
            <span class="meta-item">
              <svg class="meta-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                <line x1="16" y1="2" x2="16" y2="6"/>
                <line x1="8" y1="2" x2="8" y2="6"/>
                <line x1="3" y1="10" x2="21" y2="10"/>
              </svg>
              Jan 31 - Feb 1, 2026
            </span>
            <span class="meta-item">
              <svg class="meta-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                <circle cx="12" cy="10" r="3"/>
              </svg>
              Larkspur, CA
            </span>
            <span class="meta-item">
              <svg class="meta-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
              </svg>
              Level 5
            </span>
          
            <span class="meta-item meta-updated" data-card-updated="1">
              <svg class="meta-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true" focusable="false">
                <circle cx="12" cy="12" r="10"/>
                <path d="M12 6v6l4 2"/>
              </svg>
              <span data-card-updated-text>Updated Feb 6, 2026 1:12 PM PST</span>
            </span>
</div>
	        </a>

	        <!-- Open Level 5 Championship (Rollingwood YMCA - Fair Oaks) -->
	        <a href="open-level5-championship-fairoaks-feb14-2026.html" class="tournament-card is-upcoming" data-tournament-id="february|14-16|rollingwood ymca|rollingwood ymca|fair oaks|open level 5 championship" data-card-updated-iso="2026-02-08T12:15:50-08:00" data-card-close-text="Registration closed">
	          <div class="card-header">
	            <span class="card-type report" data-registration-pill>
	              <svg class="card-type-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true" focusable="false">
	                <circle cx="12" cy="12" r="10"/>
	                <path d="M12 6v6l4 2"/>
	              </svg>
	              <span data-registration-pill-text>Closed</span>
	            </span>
		            <div class="card-actions">
		              <span class="card-favorite-toggle" role="button" tabindex="0" aria-label="Star tournament" aria-pressed="false" data-favorite-toggle>
		                <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
		                  <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
		                </svg>
		              </span>
		              <span class="card-usta-link" role="button" tabindex="0" data-usta-url="https://playtennis.usta.com/competitions/rollingwoodymca/Tournaments/overview/832420EF-F6CC-48A4-AC06-1C54E9C8533D">USTA</span>
		              <div class="card-arrow">
		                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
		                  <path d="M5 12h14M12 5l7 7-7 7"/>
	                </svg>
	              </div>
	            </div>
	          </div>
	          <h3 class="card-title">Open Level 5 Championship — Fair Oaks (G12/G14 Singles)</h3>
	          <p class="card-description">Roster snapshot from the USTA players list (Girls' 12 &amp; under Singles + Girls' 14 &amp; under Singles) for the Feb 14-16, 2026 Level 5 championship at Rollingwood YMCA in Fair Oaks.</p>
	          <div class="card-meta">
	            <span class="meta-item">
	              <svg class="meta-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
	                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
	                <line x1="16" y1="2" x2="16" y2="6"/>
	                <line x1="8" y1="2" x2="8" y2="6"/>
	                <line x1="3" y1="10" x2="21" y2="10"/>
	              </svg>
	              Feb 14-16, 2026
	            </span>
	            <span class="meta-item">
	              <svg class="meta-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
	                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
	                <circle cx="12" cy="10" r="3"/>
	              </svg>
	              Fair Oaks, CA
	            </span>
	            <span class="meta-item">
	              <svg class="meta-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
	                <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
	              </svg>
	              Level 5
	            </span>
	          
            <span class="meta-item meta-updated" data-card-updated="1">
              <svg class="meta-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true" focusable="false">
                <circle cx="12" cy="12" r="10"/>
                <path d="M12 6v6l4 2"/>
              </svg>
              <span data-card-updated-text>Updated Feb 8, 2026 12:15 PM PST</span>
            </span>
</div>
	        </a>

	        <!-- L4 Excellence Tournament Report -->
	        <a href="u12-girls-fdt-level4-jan2026.html" class="tournament-card is-past" data-card-updated-iso="2026-02-05T12:08:23-08:00" data-card-close-text="Registration closed">
	          <div class="card-header">
	            <span class="card-type report" data-registration-pill>
	              <svg class="card-type-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true" focusable="false">
	                <circle cx="12" cy="12" r="10"/>
	                <path d="M12 6v6l4 2"/>
	              </svg>
	              <span data-registration-pill-text>Closed</span>
	            </span>
		            <div class="card-actions">
		              <span class="card-favorite-toggle" role="button" tabindex="0" aria-label="Star tournament" aria-pressed="false" data-favorite-toggle>
		                <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
		                  <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
		                </svg>
		              </span>
		              <span class="card-usta-link" role="button" tabindex="0" data-usta-url="https://playtennis.usta.com/Competitions/fourdirectionstennis/Tournaments/Overview/EAD0497A-559C-4765-9253-2BF848B4FC4A">USTA</span>
		              <div class="card-arrow">
		                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
		                  <path d="M5 12h14M12 5l7 7-7 7"/>
	                </svg>
	              </div>
	            </div>
	          </div>
          <h3 class="card-title">L4 Closed Excellence - U12 Girls</h3>
          <p class="card-description">Detailed tournament report with player standings, match history, UTR analysis, and performance metrics for the January 2026 Level 4 tournament in San Jose.</p>
          <div class="card-meta">
            <span class="meta-item">
              <svg class="meta-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                <line x1="16" y1="2" x2="16" y2="6"/>
                <line x1="8" y1="2" x2="8" y2="6"/>
                <line x1="3" y1="10" x2="21" y2="10"/>
              </svg>
              Jan 10-18, 2026
            </span>
            <span class="meta-item">
              <svg class="meta-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                <circle cx="12" cy="10" r="3"/>
              </svg>
              San Jose, CA
            </span>
            <span class="meta-item">
              <svg class="meta-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                <circle cx="9" cy="7" r="4"/>
                <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
              </svg>
              32 Players
            </span>
          
            <span class="meta-item meta-updated" data-card-updated="1">
              <svg class="meta-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true" focusable="false">
                <circle cx="12" cy="12" r="10"/>
                <path d="M12 6v6l4 2"/>
              </svg>
              <span data-card-updated-text>Updated Feb 5, 2026 12:08 PM PST</span>
            </span>
</div>
        </a>
      </div>
    </section>

    <!-- Coming Soon Section -->
    <section>
      <div class="section-header">
        <div class="section-bar"></div>
        <h2 class="section-title">Coming Soon</h2>
      </div>

      <div class="coming-soon">
        <svg class="coming-soon-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <circle cx="12" cy="12" r="10"/>
          <path d="M12 6v6l4 2"/>
        </svg>
        <h3>More Reports on the Way</h3>
        <p>Additional tournament reports and analysis tools will be added throughout the 2026 season.</p>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <p>Tournament data sourced from USTA NorCal and USTA National calendars.</p>
      <p>Built with care for the junior tennis community.</p>
    </div>
  </footer>

		  <script>
		    const CARD_UPDATED_CACHE_KEY = 'tennis_tracker_card_updated_cache_v1';

		    const MONTHS = {
		      jan: 0, january: 0,
		      feb: 1, february: 1,
		      mar: 2, march: 2,
		      apr: 3, april: 3,
		      may: 4,
		      jun: 5, june: 5,
		      jul: 6, july: 6,
		      aug: 7, august: 7,
		      sep: 8, sept: 8, september: 8,
		      oct: 9, october: 9,
		      nov: 10, november: 10,
		      dec: 11, december: 11
		    };

		    function formatUpdatedIso(iso) {
		      if (!iso) return '';
		      const d = new Date(iso);
		      if (Number.isNaN(d.getTime())) return '';
		      const fmt = new Intl.DateTimeFormat('en-US', {
		        month: 'short',
		        day: 'numeric',
		        year: 'numeric',
		        hour: 'numeric',
		        minute: '2-digit',
		        timeZoneName: 'short',
		      });
		      return `Updated ${fmt.format(d)}`;
		    }

		    function parseEndDateFromText(text) {
		      const raw = (text || '').replace(/\u2013/g, '-').replace(/\s+/g, ' ').trim();
		      if (!raw) return null;
		      const yearMatch = raw.match(/\b(20\d{2})\b/);
		      const year = yearMatch ? parseInt(yearMatch[1], 10) : new Date().getFullYear();

		      const parseMonth = (m) => MONTHS[(m || '').toLowerCase()] ?? null;

		      let m = raw.match(/\b([A-Za-z]+)\s*(\d{1,2})\s*-\s*([A-Za-z]+)\s*(\d{1,2})\b/);
		      if (m) {
		        const endMonth = parseMonth(m[3]);
		        const endDay = parseInt(m[4], 10);
		        if (endMonth === null || !Number.isFinite(endDay)) return null;
		        return new Date(year, endMonth, endDay);
		      }

		      m = raw.match(/\b([A-Za-z]+)\s*(\d{1,2})\s*-\s*(\d{1,2})\b/);
		      if (m) {
		        const endMonth = parseMonth(m[1]);
		        const endDay = parseInt(m[3], 10);
		        if (endMonth === null || !Number.isFinite(endDay)) return null;
		        return new Date(year, endMonth, endDay);
		      }

		      m = raw.match(/\b([A-Za-z]+)\s*(\d{1,2})\b/);
		      if (m) {
		        const endMonth = parseMonth(m[1]);
		        const endDay = parseInt(m[2], 10);
		        if (endMonth === null || !Number.isFinite(endDay)) return null;
		        return new Date(year, endMonth, endDay);
		      }

		      return null;
		    }

		    function ensureUpdatedMeta(card) {
		      const meta = card.querySelector('.card-meta');
		      if (!meta) return null;
		      let node = meta.querySelector('[data-card-updated]');
		      if (node) return node;

		      const span = document.createElement('span');
		      span.className = 'meta-item meta-updated';
		      span.setAttribute('data-card-updated', '1');
		      span.innerHTML = `
		        <svg class="meta-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true" focusable="false">
		          <circle cx="12" cy="12" r="10"/>
		          <path d="M12 6v6l4 2"/>
		        </svg>
		        <span data-card-updated-text>Updated —</span>
		      `;
		      meta.appendChild(span);
		      return span;
		    }

		    function setCardUpdatedText(card, iso) {
		      const label = formatUpdatedIso(iso) || 'Updated —';
		      const node = ensureUpdatedMeta(card);
		      if (!node) return;
		      const textEl = node.querySelector('[data-card-updated-text]') || node;
		      textEl.textContent = label;
		      if (iso) card.setAttribute('data-card-updated-iso', iso);
		    }

		    function updateCardPastStatus(card) {
		      if (!card || card.classList.contains('calendar-card')) return;
		      const dateText = card.querySelector('.card-meta .meta-item')?.textContent || '';
		      const end = parseEndDateFromText(dateText);
		      if (!end) return;
		      const today = new Date();
		      today.setHours(0, 0, 0, 0);
		      end.setHours(0, 0, 0, 0);
		      const isPast = end < today;
		      card.classList.toggle('is-past', isPast);
		      card.classList.toggle('is-upcoming', !isPast);
		    }

		    function updateAllCardPastStatuses() {
		      document.querySelectorAll('a.tournament-card').forEach(updateCardPastStatus);
		    }

			    function sortTournamentCardsByDate() {
			      const tournamentSection = document.querySelector('[data-tournament-section="reports"]');
			      const cardsRoot = tournamentSection?.querySelector('.cards-grid');
			      if (!cardsRoot) return;

		      const cards = Array.from(cardsRoot.querySelectorAll(':scope > a.tournament-card'));
		      if (cards.length <= 1) return;

		      const today = new Date();
		      today.setHours(0, 0, 0, 0);
		      const todayMs = today.getTime();

		      const keyed = cards.map((card, idx) => {
		        const dateText = card.querySelector('.card-meta .meta-item')?.textContent || '';
		        const end = parseEndDateFromText(dateText);
		        const endDate = end ? new Date(end.getFullYear(), end.getMonth(), end.getDate()) : null;
		        const endMs = endDate ? endDate.getTime() : Number.NEGATIVE_INFINITY;
		        const isPast = endDate ? endMs < todayMs : false;
		        return { card, idx, endMs, isPast };
		      });

			      keyed.sort((a, b) => {
			        if (a.isPast !== b.isPast) return a.isPast ? 1 : -1;
			        if (a.endMs !== b.endMs) {
			          // Upcoming: soonest first. Past: most recent first.
			          return a.isPast ? (b.endMs - a.endMs) : (a.endMs - b.endMs);
			        }
			        return a.idx - b.idx;
			      });

		      const fragment = document.createDocumentFragment();
		      keyed.forEach(({ card }) => fragment.appendChild(card));
		      cardsRoot.appendChild(fragment);
		    }

		    function loadUpdatedCache() {
		      try {
		        const raw = window.localStorage.getItem(CARD_UPDATED_CACHE_KEY);
		        const parsed = raw ? JSON.parse(raw) : {};
		        return parsed && typeof parsed === 'object' ? parsed : {};
		      } catch {
		        return {};
		      }
		    }

		    function saveUpdatedCache(cache) {
		      try {
		        window.localStorage.setItem(CARD_UPDATED_CACHE_KEY, JSON.stringify(cache || {}));
		      } catch {
		        // ignore
		      }
		    }

		    function normalizeCachedMeta(entry) {
		      if (!entry) return {};
		      if (typeof entry === 'string') return { updatedIso: entry };
		      if (entry && typeof entry === 'object') return entry;
		      return {};
		    }

		    function extractCloseTextFromReportDoc(doc) {
		      if (!doc) return '';

		      const stats = Array.from(doc.querySelectorAll('.key-stat'));
		      for (const stat of stats) {
		        const label = (stat.querySelector('.key-label')?.textContent || '').trim().toLowerCase();
		        if (label !== 'closes') continue;
		        return (stat.querySelector('.key-value')?.textContent || '').trim();
		      }

		      const rows = Array.from(doc.querySelectorAll('.detail-row'));
		      for (const row of rows) {
		        const label = (row.querySelector('.detail-label')?.textContent || '').trim().toLowerCase();
		        if (!label.startsWith('registration closes')) continue;
		        return (row.querySelector('.detail-value')?.textContent || '').trim();
		      }

		      return '';
		    }

		    function parseCloseDate(closeText) {
		      const text = (closeText || '').replace(/\u2013/g, '-').replace(/\s+/g, ' ').trim();
		      if (!text) return null;
		      if (/registration closed/i.test(text)) return { status: 'closed', date: null };
		      if (/see usta/i.test(text)) return { status: 'unknown', date: null };

		      const m = text.match(/([A-Za-z]+)\s+(\d{1,2}),\s*(\d{4})\s+at\s+(\d{1,2}):(\d{2})\s*(AM|PM)\s*([A-Z]{2,4})?/i);
		      if (!m) return { status: 'unknown', date: null };

		      const MONTHS = {
		        january: 0,
		        february: 1,
		        march: 2,
		        april: 3,
		        may: 4,
		        june: 5,
		        july: 6,
		        august: 7,
		        september: 8,
		        october: 9,
		        november: 10,
		        december: 11,
		      };

		      const month = MONTHS[(m[1] || '').toLowerCase()];
		      const day = parseInt(m[2], 10);
		      const year = parseInt(m[3], 10);
		      let hour = parseInt(m[4], 10);
		      const minute = parseInt(m[5], 10);
		      const ampm = (m[6] || '').toUpperCase();
		      const tz = (m[7] || '').toUpperCase();

		      if (![month, day, year, hour, minute].every((x) => Number.isFinite(x))) return { status: 'unknown', date: null };
		      if (ampm === 'PM' && hour !== 12) hour += 12;
		      if (ampm === 'AM' && hour === 12) hour = 0;

		      const tzOffsets = { PST: -480, PDT: -420 };
		      const offsetMin = tzOffsets[tz];
		      if (Number.isFinite(offsetMin)) {
		        const utcMs = Date.UTC(year, month, day, hour, minute) - offsetMin * 60 * 1000;
		        return { status: 'ok', date: new Date(utcMs) };
		      }

		      return { status: 'ok', date: new Date(year, month, day, hour, minute) };
		    }

		    function formatCloseCountdown(msRemaining) {
		      const totalMinutes = Math.max(0, Math.ceil(msRemaining / 60000));
		      const minutes = totalMinutes % 60;
		      const totalHours = Math.floor(totalMinutes / 60);
		      const hours = totalHours % 24;
		      const days = Math.floor(totalHours / 24);
		      if (days >= 2) return `${days}d`;
		      if (days === 1) return `1d ${hours}h`;
		      if (totalHours >= 1) return minutes ? `${totalHours}h ${minutes}m` : `${totalHours}h`;
		      return `${Math.max(1, totalMinutes)}m`;
		    }

		    function formatCloseDateShort(dt) {
		      try {
		        const d = dt instanceof Date ? dt : new Date(dt);
		        if (!Number.isFinite(d.getTime())) return '';
		        const fmt = new Intl.DateTimeFormat('en-US', { month: 'short', day: 'numeric' });
		        return fmt.format(d);
		      } catch {
		        return '';
		      }
		    }

		    function applyRegistrationPill(card, closeText) {
		      const pill = card.querySelector('[data-registration-pill]');
		      if (!pill) return;

		      pill.classList.remove('is-closed', 'is-closing-soon');
		      pill.removeAttribute('data-close-ms');
		      pill.removeAttribute('data-close-status');
		      pill.removeAttribute('title');

		      const parsed = parseCloseDate(closeText);
		      const status = parsed?.status || 'unknown';
		      const dt = parsed?.date || null;
		      const textEl = pill.querySelector('[data-registration-pill-text]') || pill;

		      if (status === 'unknown') {
		        textEl.textContent = 'Closes —';
		        return;
		      }

		      if (status === 'closed') {
		        pill.classList.add('is-closed');
		        pill.setAttribute('data-close-status', 'closed');
		        if (closeText) pill.setAttribute('title', closeText);
		        textEl.textContent = 'Closed';
		        return;
		      }

		      if (!(dt instanceof Date) || !Number.isFinite(dt.getTime())) {
		        textEl.textContent = 'Closes —';
		        return;
		      }

		      if (closeText) pill.setAttribute('title', closeText);
		      pill.setAttribute('data-close-ms', String(dt.getTime()));
		      updateRegistrationPillCountdown(pill);
		    }

		    function updateRegistrationPillCountdown(pill) {
		      if (!pill) return;
		      const status = pill.getAttribute('data-close-status') || '';
		      if (status === 'closed') return;

		      const msRaw = pill.getAttribute('data-close-ms') || '';
		      const closeMs = parseInt(msRaw, 10);
		      if (!Number.isFinite(closeMs)) return;

		      const remaining = closeMs - Date.now();
		      const textEl = pill.querySelector('[data-registration-pill-text]') || pill;

		      if (remaining <= 0) {
		        pill.classList.remove('is-closing-soon');
		        pill.classList.add('is-closed');
		        pill.setAttribute('data-close-status', 'closed');
		        textEl.textContent = 'Closed';
		        return;
		      }

		      const closeDt = new Date(closeMs);
		      const closeLabel = formatCloseDateShort(closeDt);
		      if (remaining > 24 * 60 * 60 * 1000 && closeLabel) {
		        pill.classList.remove('is-closing-soon');
		        textEl.textContent = `Closes ${closeLabel}`;
		        return;
		      }

		      pill.classList.toggle('is-closing-soon', remaining < 24 * 60 * 60 * 1000);
		      textEl.textContent = `Closes in ${formatCloseCountdown(remaining)}`;
		    }

		    function updateAllRegistrationPills() {
		      document.querySelectorAll('[data-registration-pill][data-close-ms]').forEach((pill) => {
		        updateRegistrationPillCountdown(pill);
		      });
		    }

		    async function populateReportCardUpdatedLabels() {
		      const CACHE_MAX_AGE_MS = 6 * 60 * 60 * 1000;
		      const cache = loadUpdatedCache();
		      const reportCards = Array.from(document.querySelectorAll('a.tournament-card')).filter((card) => {
		        if (card.classList.contains('calendar-card')) return false;
		        return !!card.querySelector('.card-type.report');
		      });
	
		      for (const card of reportCards) {
		        ensureUpdatedMeta(card);
	
		        const directIso = card.getAttribute('data-card-updated-iso') || '';
		        if (directIso) {
		          setCardUpdatedText(card, directIso);
		          // Still allow registration pill population (if cached) without fetching.
		        }
		
		        const directClose = (card.getAttribute('data-card-close-text') || '').trim();
		        if (directClose) {
		          applyRegistrationPill(card, directClose);
		        }
	
		        const href = (card.getAttribute('href') || '').trim();
		        if (!href || href.startsWith('http')) continue;
	
		        const meta = normalizeCachedMeta(cache[href]);
		        const cachedIso = (meta.updatedIso || '').trim();
		        const cachedClose = (meta.closeText || '').trim();
		        const cachedAt = Number(meta.cachedAt || 0);

		        if (!directIso && cachedIso) setCardUpdatedText(card, cachedIso);
		        if (!directClose && cachedClose) applyRegistrationPill(card, cachedClose);
	
		        const freshEnough = cachedAt && (Date.now() - cachedAt) < CACHE_MAX_AGE_MS;
		        const directIsoOk = !!formatUpdatedIso(directIso);
		        const cachedIsoOk = !!formatUpdatedIso(cachedIso);
		        const directCloseOk = (() => {
		          const p = parseCloseDate(directClose);
		          return p && p.status !== 'unknown';
		        })();
		        const cachedCloseOk = (() => {
		          const p = parseCloseDate(cachedClose);
		          return p && p.status !== 'unknown';
		        })();
		        const hasEnough = (directIsoOk || cachedIsoOk) && (directCloseOk || cachedCloseOk || meta.closeText === '');
		        if (freshEnough && hasEnough) continue;

		        try {
		          const resp = await fetch(href, { cache: 'no-cache' });
		          if (!resp.ok) continue;
		          const html = await resp.text();
		          const doc = new DOMParser().parseFromString(html, 'text/html');

		          const iso = (doc.querySelector('#report-updated-badge')?.getAttribute('data-updated-iso') || '').trim();
		          const closeText = extractCloseTextFromReportDoc(doc);

		          cache[href] = {
		            updatedIso: iso,
		            closeText,
		            cachedAt: Date.now(),
		          };

		          if (!directIso && iso) setCardUpdatedText(card, iso);
		          applyRegistrationPill(card, closeText);
		        } catch {
		          // ignore
		        }
		      }

		      saveUpdatedCache(cache);
		    }

		    function setupUstaLinkDelegation() {
		      const openUsta = (target, event) => {
		        event.preventDefault();
		        event.stopPropagation();
	        const url = target.getAttribute('data-usta-url');
	        if (!url) return;
	        window.open(url, '_blank', 'noopener');
	      };
	
	      document.addEventListener('click', (event) => {
	        const el = event.target?.closest?.('.card-usta-link');
	        if (!el) return;
	        openUsta(el, event);
	      });
	
	      document.addEventListener('keydown', (event) => {
	        if (event.key !== 'Enter' && event.key !== ' ') return;
	        const el = event.target?.closest?.('.card-usta-link');
	        if (!el) return;
	        openUsta(el, event);
	      });
	    }
	
	    function initTournamentFavorites() {
	      const STORAGE_KEY = 'tennis_tracker_starred_tournaments_v1';
	      const FILTER_KEY = 'tennis_tracker_starred_filter_v1';
	
	      const tournamentSection = document.querySelector('[data-tournament-section="reports"]');
	      if (!tournamentSection) return null;
	
	      const countEl = tournamentSection.querySelector('[data-tournament-count]');
	      const filterToggle = tournamentSection.querySelector('[data-favorites-filter-toggle]');
	      const cardsRoot = tournamentSection.querySelector('.cards-grid') || tournamentSection;
	
	      const getCards = () => Array.from(cardsRoot.querySelectorAll('a.tournament-card'));
	
	      const getTournamentId = (card) => {
	        const explicit = card.getAttribute('data-tournament-id');
	        if (explicit) return explicit;
	        const href = card.getAttribute('href') || '';
	        if (href) return href;
	        const title = card.querySelector('.card-title')?.textContent?.trim() || '';
	        return title || 'unknown';
	      };
	
	      const loadStarred = () => {
	        try {
	          const raw = window.localStorage.getItem(STORAGE_KEY);
	          if (!raw) return new Set();
	          const parsed = JSON.parse(raw);
	          if (!Array.isArray(parsed)) return new Set();
	          return new Set(parsed.filter((x) => typeof x === 'string'));
	        } catch {
	          return new Set();
	        }
	      };
	
	      const saveStarred = (starredSet) => {
	        try {
	          window.localStorage.setItem(STORAGE_KEY, JSON.stringify(Array.from(starredSet)));
	        } catch {
	          // ignore
	        }
	      };
	
	      const readFilterEnabled = () => {
	        try {
	          return window.localStorage.getItem(FILTER_KEY) === '1';
	        } catch {
	          return false;
	        }
	      };
	
	      const writeFilterEnabled = (enabled) => {
	        try {
	          window.localStorage.setItem(FILTER_KEY, enabled ? '1' : '0');
	        } catch {
	          // ignore
	        }
	      };
	
	      const starred = loadStarred();
	
	      const updateCardUi = (card) => {
	        const id = getTournamentId(card);
	        const isFavorited = starred.has(id);
	        card.setAttribute('data-favorited', isFavorited ? 'true' : 'false');
	        const toggle = card.querySelector('[data-favorite-toggle]');
	        if (toggle) toggle.setAttribute('aria-pressed', isFavorited ? 'true' : 'false');
	      };
	
	      const updateAllCardsUi = () => {
	        getCards().forEach(updateCardUi);
	      };
	
	      const updateCount = () => {
	        if (!countEl) return;
	        const cards = getCards();
	        const total = cards.length;
	        const visible = cards.filter((card) => !card.classList.contains('is-hidden-by-favorite-filter')).length;
	        const filterOn = filterToggle?.classList.contains('is-active');
	        const shown = filterOn ? visible : total;
	        countEl.textContent = `${shown} Tournaments`;
	      };
	
	      const applyFilter = () => {
	        const filterOn = filterToggle?.classList.contains('is-active');
	        getCards().forEach((card) => {
	          if (!filterOn) {
	            card.classList.remove('is-hidden-by-favorite-filter');
	            return;
	          }
	          const id = getTournamentId(card);
	          card.classList.toggle('is-hidden-by-favorite-filter', !starred.has(id));
	        });
	        updateCount();
	      };
	
		      const toggleFavorite = (card) => {
		        const id = getTournamentId(card);
		        const wasFavorited = starred.has(id);
		        if (wasFavorited) starred.delete(id);
		        else starred.add(id);
		        saveStarred(starred);
		        // Calendar event cards are injected only because they are starred.
		        // If a user unstars one from the home page, remove it immediately.
		        if (wasFavorited && card.getAttribute('data-calendar-event-card') === 'true') {
		          card.remove();
		        } else {
		          updateCardUi(card);
		        }
		        applyFilter();
		      };
	
	      // Event delegation so dynamically injected cards work too.
	      cardsRoot.addEventListener('click', (event) => {
	        const toggle = event.target?.closest?.('[data-favorite-toggle]');
	        if (!toggle) return;
	        const card = toggle.closest('a.tournament-card');
	        if (!card) return;
	        event.preventDefault();
	        event.stopPropagation();
	        toggleFavorite(card);
	      });
	
	      cardsRoot.addEventListener('keydown', (event) => {
	        if (event.key !== 'Enter' && event.key !== ' ') return;
	        const toggle = event.target?.closest?.('[data-favorite-toggle]');
	        if (!toggle) return;
	        const card = toggle.closest('a.tournament-card');
	        if (!card) return;
	        event.preventDefault();
	        event.stopPropagation();
	        toggleFavorite(card);
	      });
	
	      if (filterToggle) {
	        const filterEnabled = readFilterEnabled();
	        filterToggle.classList.toggle('is-active', filterEnabled);
	        filterToggle.setAttribute('aria-pressed', filterEnabled ? 'true' : 'false');
	        filterToggle.addEventListener('click', () => {
	          const enabled = !filterToggle.classList.contains('is-active');
	          filterToggle.classList.toggle('is-active', enabled);
	          filterToggle.setAttribute('aria-pressed', enabled ? 'true' : 'false');
	          writeFilterEnabled(enabled);
	          applyFilter();
	        });
	      }
	
	      updateAllCardsUi();
	      applyFilter();
	
	      return {
	        starred,
	        cardsRoot,
	        refresh: () => {
	          updateAllCardsUi();
	          applyFilter();
	        }
	      };
	    }
	
			    async function addStarredCalendarEventCards(favoritesApi) {
		      const cardsRoot = favoritesApi?.cardsRoot;
		      const starred = favoritesApi?.starred;
		      if (!cardsRoot || !starred) return;
		
		      const STAR_STORAGE_KEY = 'tennis_tracker_starred_tournaments_v1';
		
		      // Avoid duplicates if the script runs more than once.
		      cardsRoot
		        .querySelectorAll('[data-calendar-event-card="true"], [data-starred-calendar-event-card="true"]')
		        .forEach((el) => el.remove());
	
	      const calendarHref = '2025-usta-norcal-national.html';
	      let html = '';
	      try {
	        const resp = await fetch(calendarHref, { cache: 'no-cache' });
	        if (!resp.ok) return;
	        html = await resp.text();
	      } catch {
	        return;
	      }
	
		      const m = html.match(/<script\s+id="csv-data"\s+type="text\/plain">([\s\S]*?)<\/script>/i);
	      const csvText = (m?.[1] || '').trim();
	      if (!csvText) return;
	
	      function parseCsv(text) {
	        const rows = [];
	        let row = [];
	        let field = '';
	        let inQuotes = false;
	        for (let i = 0; i < text.length; i++) {
	          const char = text[i];
	          if (inQuotes) {
	            if (char === '\"') {
	              if (text[i + 1] === '\"') {
	                field += '\"';
	                i++;
	              } else {
	                inQuotes = false;
	              }
	            } else {
	              field += char;
	            }
	          } else {
	            if (char === '\"') inQuotes = true;
	            else if (char === ',') {
	              row.push(field);
	              field = '';
	            } else if (char === '\\n') {
	              row.push(field);
	              rows.push(row);
	              row = [];
	              field = '';
	            } else if (char !== '\\r') {
	              field += char;
	            }
	          }
	        }
	        if (field.length || row.length) {
	          row.push(field);
	          rows.push(row);
	        }
	        return rows;
	      }
	
	      function isTrue(val) {
	        return (val || '').toString().trim().toUpperCase() === 'TRUE';
	      }
	
	      function normalizeIdPart(value) {
	        return (value || '')
	          .toString()
	          .trim()
	          .toLowerCase()
	          .replace(/\\s+/g, ' ')
	          .replace(/[|]/g, '/');
	      }
	
	      function getTournamentId(row) {
	        return [
	          normalizeIdPart(row['Month']),
	          normalizeIdPart(row['Date(s)']),
	          normalizeIdPart(row['Organization']),
	          normalizeIdPart(row['Primary Site']),
	          normalizeIdPart(row['City']),
	          normalizeIdPart(row['Level'])
	        ].join('|');
	      }
	
	      function getTournamentTitle(row) {
	        return row['Tournament Name'] || row['Level'] || '';
	      }
	
	      function getAgeLabel(row) {
	        const isU12 = isTrue(row['G12']);
	        const isU14 = isTrue(row['G14']);
	        if (isU12 && isU14) return '12/14';
	        if (isU12) return '12';
	        if (isU14) return '14';
	        return '';
	      }
	
		      function getFormat(row) {
	        const notes = (row['Notes'] || '').toLowerCase();
	        const doublesOnly = row['Doubles Only'] === 'TRUE' || notes.includes('doubles only') || notes.includes('mixed doubles');
	        const singlesDraw = (row['Singles Draw'] || '').trim();
	        const doublesDraw = (row['Doubles Draw'] || '').trim();
	        const hasDoubles = !!doublesDraw || notes.includes('singles & doubles');
	        if (doublesOnly) return 'D';
	        if (singlesDraw && hasDoubles) return 'SD';
	        return 'S';
	      }
	
	      // Build row dicts.
	      const parsed = parseCsv(csvText);
	      const header = parsed[0] || [];
	      const dicts = (parsed.slice(1) || []).map((cells) => {
	        const obj = {};
	        header.forEach((key, idx) => (obj[key] = cells[idx] || ''));
	        return obj;
	      });
	
		      // Merge by stable tournament id (OR division flags, keep best link/name).
	      const merged = new Map();
	      dicts.forEach((row) => {
	        const id = getTournamentId(row);
	        const existing = merged.get(id);
	        if (!existing) {
	          merged.set(id, { ...row });
	          return;
	        }
	        ['B18','B16','B14','B12','G18','G16','G14','G12'].forEach((k) => {
	          existing[k] = (isTrue(existing[k]) || isTrue(row[k])) ? 'TRUE' : 'FALSE';
	        });
	        const eHome = (existing['Home Page'] || '').trim();
	        const rHome = (row['Home Page'] || '').trim();
		        if (!/^https?:\/\//i.test(eHome) && /^https?:\/\//i.test(rHome)) existing['Home Page'] = rHome;
		        if (!(existing['Tournament Name'] || '').trim() && (row['Tournament Name'] || '').trim()) existing['Tournament Name'] = row['Tournament Name'];
		      });

		      const normalizeUrl = (url) => {
		        return (url || '')
		          .toString()
		          .trim()
		          .toLowerCase()
		          .replace(/[#?].*$/, '')
		          .replace(/\/+$/, '');
		      };

		      const mergedRows = Array.from(merged.values());

		      // Map PlayTennis "Home Page" URLs to stable ids so report cards can share stars with the calendar.
		      const homePageToId = new Map();
		      mergedRows.forEach((row) => {
		        const url = (row['Home Page'] || '').trim();
		        if (!/^https?:\/\//i.test(url)) return;
		        homePageToId.set(normalizeUrl(url), getTournamentId(row));
		      });

		      // Assign stable ids to report cards (if missing) and migrate any existing stars to the stable id.
		      let migrated = false;
		      const reportCards = Array.from(cardsRoot.querySelectorAll(':scope > a.tournament-card')).filter((card) => {
		        return !!card.querySelector('.card-type.report');
		      });
		      reportCards.forEach((card) => {
		        if (card.getAttribute('data-tournament-id')) return;
		        const ustaUrl = card.querySelector('.card-usta-link')?.getAttribute('data-usta-url') || '';
		        if (!ustaUrl) return;
		        const stableId = homePageToId.get(normalizeUrl(ustaUrl));
		        if (!stableId) return;

		        const legacyId =
		          (card.getAttribute('href') || '').trim() ||
		          (card.querySelector('.card-title')?.textContent || '').trim();

		        card.setAttribute('data-tournament-id', stableId);
		        if (legacyId && starred.has(legacyId) && !starred.has(stableId)) {
		          starred.delete(legacyId);
		          starred.add(stableId);
		          migrated = true;
		        }
		      });

		      if (migrated) {
		        try {
		          window.localStorage.setItem(STAR_STORAGE_KEY, JSON.stringify(Array.from(starred)));
		        } catch {
		          // ignore
		        }
		      }

		      favoritesApi.refresh();

		      const reportIds = new Set(
		        reportCards.map((card) => card.getAttribute('data-tournament-id')).filter((id) => typeof id === 'string' && id.trim())
		      );

		      const rows = mergedRows.filter((row) => {
		        const id = getTournamentId(row);
		        return starred.has(id) && !reportIds.has(id);
		      });
		      if (!rows.length) return;

		      const computeEndDate = (row) => {
		        const month = (row['Month'] || '').trim();
		        const dates = (row['Date(s)'] || '').trim();
		        const text = `${month} ${dates}`;
		        return parseEndDateFromText(text);
		      };

		      const today = new Date();
		      today.setHours(0, 0, 0, 0);

		      const fragment = document.createDocumentFragment();
		      rows.forEach((row) => {
		        const id = getTournamentId(row);
	        const title = getTournamentTitle(row).trim() || 'Tournament';
	        const format = getFormat(row);
	        const age = getAgeLabel(row);
	        const city = (row['City'] || '').trim();
	        const level = (row['Level'] || '').trim();
	        const site = (row['Primary Site'] || '').trim();
	        const ustaUrl = (row['Home Page'] || '').trim();
		        const ustaButton = /^https?:\/\//i.test(ustaUrl)
		          ? `<span class=\"card-usta-link\" role=\"button\" tabindex=\"0\" data-usta-url=\"${ustaUrl}\">USTA</span>`
		          : '';
	
		        const lastUpdated = (row['Last Updated'] || '').trim();
			        const endDate = computeEndDate(row);
			        const isPast = endDate ? (new Date(endDate.getFullYear(), endDate.getMonth(), endDate.getDate()) < today) : false;

		        const card = document.createElement('a');
			        card.href = calendarHref;
			        card.className = `tournament-card ${isPast ? 'is-past' : 'is-upcoming'}`;
			        card.setAttribute('data-tournament-id', id);
			        card.setAttribute('data-calendar-event-card', 'true');
			        if (lastUpdated) card.setAttribute('data-card-updated-iso', lastUpdated);
			        card.innerHTML = `
	          <div class=\"card-header\">
	            <span class=\"card-type calendar\">
	              <svg class=\"card-type-icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">
	                <rect x=\"3\" y=\"4\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"/>
	                <line x1=\"16\" y1=\"2\" x2=\"16\" y2=\"6\"/>
	                <line x1=\"8\" y1=\"2\" x2=\"8\" y2=\"6\"/>
	                <line x1=\"3\" y1=\"10\" x2=\"21\" y2=\"10\"/>
	              </svg>
	              Event
	            </span>
	            <div class=\"card-actions\">
	              <span class=\"card-favorite-toggle\" role=\"button\" tabindex=\"0\" aria-label=\"Star tournament\" aria-pressed=\"false\" data-favorite-toggle>
	                <svg viewBox=\"0 0 24 24\" aria-hidden=\"true\" focusable=\"false\">
	                  <polygon points=\"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2\"/>
	                </svg>
	              </span>
	              ${ustaButton}
	              <div class=\"card-arrow\">
	                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">
	                  <path d=\"M5 12h14M12 5l7 7-7 7\"/>
	                </svg>
	              </div>
	            </div>
	          </div>
	          <h3 class=\"card-title\">${title}</h3>
	          <p class=\"card-description\">${[format, age].filter(Boolean).join(' • ')}${site ? ` • ${site}` : ''}</p>
	          <div class=\"card-meta\">
	            <span class=\"meta-item\">
	              <svg class=\"meta-icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">
	                <rect x=\"3\" y=\"4\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"/>
	                <line x1=\"16\" y1=\"2\" x2=\"16\" y2=\"6\"/>
	                <line x1=\"8\" y1=\"2\" x2=\"8\" y2=\"6\"/>
	                <line x1=\"3\" y1=\"10\" x2=\"21\" y2=\"10\"/>
	              </svg>
	              ${(row['Month'] || '').trim()} ${(row['Date(s)'] || '').trim()}
	            </span>
	            <span class=\"meta-item\">
	              <svg class=\"meta-icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">
	                <path d=\"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z\"/>
	                <circle cx=\"12\" cy=\"10\" r=\"3\"/>
	              </svg>
	              ${city}
	            </span>
	            <span class=\"meta-item\">
	              <svg class=\"meta-icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">
	                <polygon points=\"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2\"/>
	              </svg>
		              ${level}
		            </span>
		            <span class="meta-item meta-updated" data-card-updated="1">
		              <svg class="meta-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true" focusable="false">
		                <circle cx="12" cy="12" r="10"/>
		                <path d="M12 6v6l4 2"/>
		              </svg>
		              <span data-card-updated-text>${formatUpdatedIso(lastUpdated) || 'Updated —'}</span>
		            </span>
		          </div>
		        `;
		        fragment.appendChild(card);
		      });
	
		      // Insert starred event cards at the top of the grid.
			      cardsRoot.insertBefore(fragment, cardsRoot.firstChild);
			      favoritesApi.refresh();
			      updateAllCardPastStatuses();
			      sortTournamentCardsByDate();
			    }
	
	    // Player expiration alert data (injected by Python script)
	    window.PLAYER_ALERT_DATA = {"show_alert": false, "critical_points": 0, "min_days_remaining": 0};
	
	    function updateExpirationAlert() {
	      const data = window.PLAYER_ALERT_DATA;
	      if (!data) return;
	
	      const alert = document.querySelector('[data-expiration-alert]');
	      const alertText = document.querySelector('[data-expiration-text]');
	      if (data.show_alert && alert && alertText) {
	        alertText.textContent = `${data.critical_points} points expiring soon (${data.min_days_remaining} days)`;
	        alert.style.display = 'block';
	      }
	    }
	
		    function init() {
		      setupUstaLinkDelegation();
		      const favoritesApi = initTournamentFavorites();
		      addStarredCalendarEventCards(favoritesApi);
		      updateExpirationAlert();
		      updateAllCardPastStatuses();
		      sortTournamentCardsByDate();
		      populateReportCardUpdatedLabels();
		      updateAllRegistrationPills();
		      setInterval(updateAllRegistrationPills, 60 * 1000);
		    }
	
	    if (document.readyState === 'loading') {
	      document.addEventListener('DOMContentLoaded', init);
	    } else {
	      init();
	    }
	  </script>
</body>
</html>
